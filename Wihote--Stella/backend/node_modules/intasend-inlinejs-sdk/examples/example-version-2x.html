<!DOCTYPE html>
<html>

<head>
</head>

<body>
    <button class="tp_button" data-api_ref="payment-link" data-phone_number="254723890353"
        data-email="hello@intasend.com" data-amount="100" data-currency="KES">
        Pay Now
    </button>

    <script src="https://unpkg.com/intasend-inlinejs-sdk@2.0.8/build/intasend-inline.js"></script>
    <script>
        window.IntaSend.setup({
            publicAPIKey: "ISPubKey_test_91ffc81a-8ac4-419e-8008-7091caa8d73f",
            // Optional URL to redirect your clients
            //redirectURL: "http://yoursite.com/thankyou/",
            // Set live to false for sandbox environment
            live: false
        })

        function bindEvent(element, eventName, eventHandler) {
            if (element.addEventListener) {
                element.addEventListener(eventName, eventHandler, false);
            } else if (element.attachEvent) {
                element.attachEvent('on' + eventName, eventHandler);
            }
        }

        bindEvent(window, 'message', function (e) {
            if (e.origin === "https://websdk-sandbox.intasend.com" || e.origin ===
                "https://websdk.intasend.com") {
                if (e.data.message) {
                    if (e.data.message.identitier == 'intasend-status-update-cdrtl') {
                        if (e.data.message.state === "COMPLETE") {
                            // Do something on pay success
                            // Make sure redirectURL is ommited in 
                            // your setup function for this to work well
                        }
                    }
                }
            }
        })
    </script>
</body>

</html>
